<!-- RECALL -->
{{FrontSide}}
<div class="outside"> Answer</div>
<div class="card-back shadow">
    <div id="idReading" class="back">{{Japanese}}</div>
    {{#Reading}}
    <hr />
    <div class="backopt">{{Reading}}</div>
    {{/Reading}}
    {{#Sentence}}
    <hr />
    <div class="backopt">{{Sentence}}</div>
    {{/Sentence}}
    {{#SentenceMeaning}}
    <hr />
    <div class="backopt">{{SentenceMeaning}}</div>
    {{/SentenceMeaning}}
    {{#Note}}
    <hr />
    <div id="idNote" class="backopt">{{Note}}</div>
    {{/Note}}
    <hr />
    <div class="backopt">
        <a class="link" href="https://jisho.org/search/{{text:Japanese}}">
            jisho.org
        </a>
        <br>
        <a class="link" href="https://aulex.org/ja-es/?busca={{text:Japanese}}">
            aulex.org
        </a>
        <br>
        <a class="link" href="https://www.google.com/search?tbm=isch&q={{text:Japanese}}">
            google images
        </a>
        {{#Link}}
        <br>
        <a href="{{Link}}">
            Open in Takoboto
        </a>
        {{/Link}}
    </div>
</div>
<div id="tt">
    <tts service="android" voice="ja_JP">{{kanji:Japanese}}</tts>
    {{#Sentence}}
    <tts service="android" voice="ja_JP">{{kanji:Sentence}}</tts>
    {{/Sentence}}
    <tts service="android" voice="es_MX">
        <div id="idMeaningSpanish"></div>
    </tts>
    <tts service="android" voice="en_US">
        <div id="idMeaningEnglish"></div>
    </tts>
</div>
<div id="tts">
    {{tts ja_JP voices=Apple_Otoya:kanji:Japanese}}
    {{#Sentence}}
    {{tts ja_JP voices=Apple_Otoya:kanji:Sentence}}
    {{/Sentence}}
</div>
<script>
var note = document.getElementById("idNote").textContent
if (note) {
    if (note.includes("Usually written using kana alone")) {
        document.getElementById("idReading").style.color = "yellow";
    }
    if (note.includes("Takes the aux. verb suru")) {
        document.getElementById("idReading").innerHTML += ' + する';
    }
}

var espStart = "ES:"
var engStart = "EN:"
var reEsp = /ES:.*/
var reEng = `${engStart}.*`
var note = document.getElementById("idMeaning").innerText
if (note) {
    var espMeaning = `${note.match(reEsp)}`.replace(espStart, "")
    if (espMeaning) {
        document.getElementById("idMeaningSpanish").textContent = espMeaning
    }
    var engMeaning = `${note.match(reEng)}`.replace(engStart, "")
    if (engMeaning) {
        document.getElementById("idMeaningEnglish").textContent = engMeaning
    }
}
</script>